<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticketsystem</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>    
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>	<script src="js/createTicketHandler.js" charset="utf-8"></script>
	<script src="js/ticketTableHandler.js" charset="utf-8"></script>
	<script src="js/notificationHandler.js" charset="utf-8"></script>
  </head>

  <body>
    <div class="container-fluid mb-5 p-3 bg-primary text-white text-center">
      <h1>Ticketsystem</h1>      
    </div>
    
    <div class="container mt-3">
		<div class="row">
			<!--Ticket form-->
			<div class="col">
				<h2>Ticket erstellen</h2>
				<form id="ticketForm" action="/action_page.php" class="was-validated">
					<div class="mb-3">
						<label for="text">Titel:</label>
						<input type="text" class="form-control" id="ticket-title" placeholder="Titel eingeben" name="ticket-title" required>
					</div>

					<div class="mb-3">
						<label for="text">Ersteller:</label>
						<input type="text" class="form-control" id="ticket-creator" placeholder="Ersteller eingeben" name="ticket-creator" required>
					</div>

					<div class="mb-3">
						<label for="date">Erstellt am:</label>
						<input type="date" class="form-control" id="ticket-date" placeholder="Aktuelles Datum eingeben" name="ticket-date" required>
					</div>

					<div class="mb-3">
						<label for="text">Beschreibung:</label>
						<input type="text" class="form-control" id="ticket-description" placeholder="Beschreibung eingeben" name="ticket-description" required>
					</div>

					<div class="mb-3">
						<label for="text">Kategorie:</label>
						<select class="form-select" id="ticket-category" required>
							<option selected value="">Kategorie wählen</option>
							<option value="IT">IT</option>
							<option value="Entwicklung">Entwicklung</option>
							<option value="Vertrieb">Vertrieb</option>
						</select>
					</div>

					<div class="mb-3">
						<label for="text">Status:</label>
						<select class="form-select" id="ticket-status" required>
							<option selected value="">Status wählen</option>
							<option value="Zu_Erledigen">Zu Erledigen</option>
							<option value="In_Bearbeitung">In Bearbeitung</option>
							<option value="Erledigt">Erledigt</option>
						</select>
					</div>	
					
					<div class="mb-3">
						<label for="formFile" class="form-label">Attachment</label>
						<input class="form-control" type="file" id="ticket-attachment">
					</div>
				</form>	
				<button id="createTicket_button" class="btn btn-primary">Erstellen</button>
				<button id="abortTicket_button" class="btn btn-danger">Abbrechen</button>
			</div>

			<!--Ticket Table-->
			<div class="col overflow-auto ticketTable">
				<table class="table m table-bordered table-hover table-responsive">
					<thead>
						<tr>
							<th>Titel</th>
							<th>Ersteller</th>
							<th>Datum</th>
							<th>Beschreibung</th>
							<th>Kategorie</th>
							<th>Status</th>
							<th>Filename</th>
						</tr>
					</thead>
					<tbody id="ticketTable"></tbody>
				</table>
			</div>
		</div>

		<!--Toast-Container-->
		<div class="toast-container position-fixed bottom-0 end-0 p-3">		
			<div style="z-index: 11">
				<div id="notification-success" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
				<div class="toast-header">
					<i class="bi bi-check-circle-fill" style="color: green"></i>
					<strong class="me-auto" style="margin-left: 5px;">Success</strong>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div id="notification-body" class="toast-body">
					Created Ticket successfully.
				</div>
				</div>
			</div>

			<div style="z-index: 11">
				<div id="notification-error" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
				<div class="toast-header">
					<i class="bi bi-exclamation-octagon-fill" style="color: red"></i>
					<strong class="me-auto" style="margin-left: 5px;">Error</strong>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div id="notification-body" class="toast-body">
					Error while creating Ticket.
				</div>
				</div>
			</div>

			<div style="z-index: 11">
				<div id="notification-warning" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
				<div class="toast-header">
					<i class="bi bi-exclamation-circle-fill" style="color: yellow"></i>
					<strong class="me-auto" style="margin-left: 5px;">Warning</strong>
					<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
				</div>
				<div id="notification-body" class="toast-body">
					Unknown error ocurred.
				</div>
				</div>
			</div>
		</div>
		
    </div>	
  </body>  
</html>
